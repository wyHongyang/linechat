/*!2015-07-29 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=function(c,d){var e=this;this.$el=a(c),this.options=a.extend({},b.defaults,d),this.params=a.extend({},b.defaults.params,d.params),this.isFetching=!1,this.page=a.extend({},b.page,d.page),this.$el.on("click",".page-prev:not(.disabled)",function(a){e.prev()}),this.$el.on("click",".page-next:not(.disabled)",function(a){e.next()}),this.$el.on("click",".page-first:not(.disabled)",function(a){e.first()}),this.$el.on("click",".page-last:not(.disabled)",function(a){e.last()}),this.$el.on("click",'.page-skip input[type="button"]',function(b){var c=a(this),d=c.siblings('input[type="text"]').val().trim().toLowerCase();!isNaN(d)&&parseInt(d)>=1&&parseInt(d)<=e.options.totalPage&&e.skip(parseInt(d))}),this.$el.on("click",".page-number",function(b){var c=a(b.currentTarget),d=c.find("a").text().trim();if(isNaN(d)){var f=parseInt(e.$el.find(".page-number.current a").text().trim());(!(f%3)||f>=3)&&f<e.options.totalPage&&e.skip(f+1)}else e.onClick(c)})};b.defaults={params:{pageSize:10,pageNumber:1},language:"en",totalPage:1,ajaxUrl:"",onSuccess:a.noop},b.page={en:{prev:"<",next:">",first:"<<",last:">>",skipTo:"skip to",skip:"go"},cn:{prev:"上一页",next:"下一页",first:"第一页",last:"最后一页",skipTo:"跳转到",skip:"确定"}},b.prototype.init=function(b){var c=this,b=a.extend({},c.params,b);c.fetch(b);var d,e='<nav class="jq-pagination"><li class="page-first disabled"><a href="javascript:;">'+c.page[c.options.language].first+'</a></li><li class="page-prev disabled"><a href="javascript:;">'+c.page[c.options.language].prev+'</a></li><li class="page-number current"><a href="javascript:;">1</a></li><li class="page-next disabled"><a href="javascript:;">'+c.page[c.options.language].next+'</a></li><li class="page-last disabled"><a href="javascript:;">'+c.page[c.options.language].last+'</a></li><li class="page-skip">'+c.page[c.options.language].skipTo+' <input type="text" value="1"/><input type="button" value="'+c.page[c.options.language].skip+'"/></li></nav>';c.options.totalPage<=3&&(c.options.totalPage<3?d='<li class="page-number"><a href="javascript:;">2</a>':d+='<li class="page-number"><a href="javascript:;">2</a></li><li class="page-number"><a href="javascript:;">3</a></li>',a(e).find(".current").after(d).end().find(".page-next,.page-last").removeClass("disabled")),c.options.totalPage>3&&(d='<li class="page-number"><a href="javascript:;">2</a></li><li class="page-number"><a href="javascript:;">3</a></li><li class="page-number"><a href="javascript:;">...</a></li><li class="page-number"><a href="javascript:;">'+c.options.totalPage+"</a></li>",a(e).find(".current").after(d).end().find(".page-next,.page-last").removeClass("disabled")),c.$el.append(e),d&&(a(d).insertAfter(a(".current")),c.$el.find(".page-next,.page-last").removeClass("disabled"))},b.prototype.fetch=function(b){var c=this;this.request=a.ajax({url:this.options.url,data:b,type:"GET",dataType:"json",success:function(a){var d;c.options.totalPage=a.totalPage||1,d=a.content,c.$el.find(".page-prev,.page-first")[b.pageNumber>1?"removeClass":b.pageNumber==c.options.totalPage?"addClass":"removeClass"]("disabled"),c.$el.find(".page-next,.page-last")[b.pageNumber<c.options.totalPage?"removeClass":"addClass"]("disabled"),c.options.onSuccess.apply(c,[d])},errot:function(a){},done:function(a){c.fetching=!1}})},b.prototype.prev=function(){return this.isFetching?!1:void(this.options.params.pageNumber>1&&(this.options.params.pageNumber-=1,this.$el.find(".current").removeClass("current").prev(".page-number").addClass("current").end().end().find(".page-next,.page-last").removeClass("disabled"),this.skip(this.options.params.pageNumber),1==this.options.params.pageNumber&&this.$el.find(".page-prev,.page-first").addClass("disabled")))},b.prototype.next=function(){return this.isFetching?!1:void(this.options.params.pageNumber<this.options.totalPage&&(this.options.params.pageNumber+=1,this.$el.find(".current").removeClass("current").next(".page-number").addClass("current").end().end().find(".page-prev,.page-first").removeClass("disabled"),this.skip(this.options.params.pageNumber),this.options.params.pageNumber==this.options.totalPage&&this.$el.find(".page-next,.page-last").addClass("disabled")))},b.prototype.first=function(){return this.isFetching?!1:(this.options.params.pageNumber=1,this.$el.find(".current").removeClass("current").end().find(".page-number").eq(0).addClass("current").end().end().find(".page-prev,.page-first").addClass("disabled").end().find(".page-next,.page-last").removeClass("disabled"),void this.fetch(this.options.params))},b.prototype.last=function(){return this.isFetching?!1:(this.options.params.pageNumber=this.options.totalPage,this.$el.find(".current").removeClass("current").end().find(".page-number").last().addClass("current").end().end().find(".page-next,.page-last").addClass("disabled").end().find(".page-prev,.page-first").removeClass("disabled"),void this.fetch(this.options.params))},b.prototype.onClick=function(b){return this.isFetching?!1:(b.addClass("current").siblings(".page-number").removeClass("current"),void this.fetch(a.extend({},this.options.params,{pageNumber:b.text().trim().toLowerCase()})))},b.prototype.skip=function(b){var c=this;return this.isFetching?!1:void(1==b?(c.first(),c.$el.find(".page-number a").size()>4?(c.$el.find(".page-number a").eq(0).html(b).end().eq(1).html(b+1).end().eq(2).html(b+2).end().eq(3).html("...").end().last().html(c.options.totalPage).end(),c.$el.find(".page-number").eq(0).addClass("current").siblings().removeClass("current")):(c.$el.find(".page-number a").eq(0).html(b).end().eq(1).html(b+1).end().eq(2).html(b+2).end().eq(3).html("...").end(),c.$el.find(".page-number").eq(0).addClass("current").siblings().removeClass("current"))):b==c.options.totalPage?(c.last(),c.$el.find(".page-number a").size()>4?(c.$el.find(".page-number a").last().html(b).end().eq(1).html("...").end().eq(2).html(b-2).end().eq(3).html(b-1).end().eq(0).html(1).end(),c.$el.find(".page-number").last().addClass("current").siblings().removeClass("current")):(c.$el.find(".page-number a").last().html(b).end().eq(0).html("...").end().eq(1).html(b-2).end().eq(2).html(b-1).end(),c.$el.find(".page-number").eq(b-1).addClass("current").siblings().removeClass("current"))):(c.options.params.pageNumber=b,c.fetch(this.options.params),b>3&&c.$el.find(".page-number a").eq(0).html("...").end().eq(1).html(b-2).end().eq(2).html(b-1).end().eq(3).html(b).end().last().html("..."),c.$el.find(".page-number").each(function(c,d){var e=a(d);b==e.text().trim().toLowerCase()&&e.addClass("current").siblings(".page-number").removeClass("current")})))},a.fn.pagination=function(c,d){return this.each(function(){var e=a(this);data=e.data("pagination"),data?"string"==typeof c&&data[c](d):(e.data("pagination",new b(this,d)),"string"==typeof c&&e.data("pagination")[c](d.params))})}}),function(a){var b=a.fn.select=function(d){var f=this,g=a(this);return this.options=a.extend({},b.settings,d),this.each(function(){c.call(f,g,f.options),g.find(".m-select").off("change").on("change",function(b){var c=a(b.target),d={value:c.val(),label:c.find('.jq-option[selected="selected"]').text().trim().toLowerCase()};e.call(f,d,f,f.options)})})};b.settings={isFetching:!1,url:"",selectClass:"jq-select",selectCss:{borderRadius:"4px",minWidth:"160px"},optionClass:"jq-option",currentSelect:"0",onSelect:a.noop};var c=function(b,c){var e=a("<select />",{"class":"m-select "+c.selectClass,css:{"min-width":c.selectCss.minWidth,"border-radius":c.selectCss.borderRadius}}),f=d(c),g="";a.each(f.content,function(a,b){g+=f.currentSelect==b.value?'<option class="m-option '+c.optionClass+'" data-value="'+b.value+'" selected="selected">'+b.label+"</option>":'<option class="m-option '+c.optionClass+'" data-value="'+b.value+'">'+b.label+"</option>"}),e.append(g),b.append(e)},d=function(c){var d=this;b.settings.isFetching=!0,this.options=a.extend({},this.options,c),this.request=a.ajax({url:d.options.url,type:"GET",dataType:"json",success:function(a){return a},error:function(a){return!1},done:function(){b.settings.isFetching=!1}})},e=function(a,b,c){void 0!=a&&c.onSelect.call(b,a)}}(jQuery),function(a){a.fn.extend({validator:function(a){return this.each(function(){})}})}(jQuery);